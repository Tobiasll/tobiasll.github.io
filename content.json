{"meta":{"title":"Tobias","subtitle":"subtitleTest","description":"一名计算机小白，JAVA新手的个人博客","author":"tobias","url":"http://tobiasll.github.io","root":"/"},"pages":[{"title":"自我介绍","date":"2019-09-26T04:44:20.000Z","updated":"2019-09-26T04:48:52.885Z","comments":true,"path":"about/index.html","permalink":"http://tobiasll.github.io/about/index.html","excerpt":"","text":"自我介绍测试"}],"posts":[{"title":"使用frp渗透公司内网中的本机虚拟机服务器","slug":"使用frp渗透公司内网中的本机虚拟机服务器","date":"2019-09-29T02:05:11.000Z","updated":"2019-09-29T03:56:37.757Z","comments":true,"path":"2019/09/29/使用frp渗透公司内网中的本机虚拟机服务器/","link":"","permalink":"http://tobiasll.github.io/2019/09/29/使用frp渗透公司内网中的本机虚拟机服务器/","excerpt":"","text":"序言由于公司配了一条新的8G内存条，之前开虚拟机都会导致本机内存满掉，这次终于可以愉快的开虚拟机了:smirk:，虽然手上有三台服务器，搬瓦工和Google cloud 还有阿里云各一台，但是都是最低配置的，没法做集群，而且没法开多个服务，所以决定将电脑的centos虚拟机当成一台服务器，但是公司做了很多网络限制，例如网盘，网易云，bilibili等很多网站都被做了限制，以及外网根本连不进去公司的电脑，所以只能通过代理的形式，目前使用shadowsocks 全局代理形式访问被公司封禁的网站，使用frp / ngrok和 teamview 连进公司的电脑，teamview 安装Linux的会出现很多问题，而且只能进行ssh 连接，不能进行端口转发，所以这次我们使用frp来进行端口转发，外网访问内网的虚拟机的rabbitMQ服务 FRP简介 frp 是一个可用于内网穿透的高性能的反向代理应用，支持 tcp, udp 协议，为 http 和 https 应用协议提供了额外的能力，且尝试性支持了点对点穿透。 架构图 其实就是外网去访问一个带有公网ip的反向代理服务器，然后代理服务端被内网的服务所连接绑定，然后配置一些端口，告诉代理服务器，这些端口进来的请求，转发到这台内网服务的某个端口，然后将响应内容在转回给代理服务器，再由代理服务器转给外网 FRP 服务可以分配给你一个域名让你本地的 web 项目提供给外网访问， 特别适合向别人展示你本机的 web demo 以及调试一些远程的 API (比如微信公众号，企业号的开发)，还有计算资源很有限的情况，例如只有一台很低配置的不能开启多个服务的外网服务器，但是内网的计算资源却很充足，也可以frp来充分利用资源。 搭建服务首先到frp的GitHub拿到安装包 https://github.com/fatedier/frp/releases 然后复制你要安装的安装包地址，Linux 在命令行输入 1wget https://github.com/fatedier/frp/releases/download/v0.29.0/frp_0.29.0_linux_amd64.tar.gz 然后解压安装包，进入frp目录 1tar -zxvf frp_0.29.0_linux_amd64.tar.gz 需要说明的一点是frp分为服务端和客户端分别以frp开头，服务端s结尾，客户端c结尾，frps / frpc，对应的配置文件为frps.ini / frpc.ini 按照上面的架构图，需要一台服务做反向代理，而且这台服务器必须是公网的，来部署frp服务端，这里我之前想拿到公司内网电脑的外网ip，但是试了很多办法都没用，所以我用了一台阿里云来当服务端，Windows的centos虚拟机来当客户端 分辨自己路由器 IP 是真实的公网 IPtracert 追踪路由也是依赖 ICMP 回显请求和 ICMP 回显应答数据包，因此可以看作 ping 的一个扩展，它用来查看网络所经过的每一跳路由并显示路由的延迟与 ip 地址，可以用来发现出故障的网络路径。 Windows : 点击该 链接 得到自己当前的 IP 地址。 环境：Windows10— 打开一个命令提示窗口tracert 108.216.***.***(输入刚才得到的IP地址) 如果只有一跳那就说明你的路由器上面是有公网 IP 地址的，如果超过一个跳跃点那就肯定是内网 IP 地址了。 Linux/ Max OS : curl 请求 ifconfig.me 拿到ip 输入traceroute 来代替 windows的tracert 配置服务端连上外网服务器的ssh 命令行，wget获取安装压缩包，解压进去目录，vi 编辑frps.ini，注意是frps，后面是s不是c，下面的配置是最简单的情况，还有很多特殊的参数，有需要的自行去看官方文档 123# frps.ini[common]bind_port = 7000 这个端口是后期客户端要连接的端口（如果设置了防火墙，注意开放端口，把端口暴露出来，阿里云要配置安全组），然后保存，输入启动服务命令，注意这里是frps后面是s不c 1./frps -c ./frps.ini # -c 后面指定服务端配置文件 启动如果没用报错之类的，可以考虑按ctrl + C停掉服务用后台启动的方式启动服务 1nohub ./frps -c ./frps.ini &amp; 目录下会生成nohub.out 日志文件 配置客户端现在我们在内网虚拟机配置客户端，和上面一样，解压frp，配置frpc.ini 123456# frpc.ini[common]# 服务端服务器的公网ip地址server_addr = 47.107.x.x# 端口server_port = 7000 配置好要连接的代理服务器IP就可以启动了，当然这里没进行任何的端口转发配置 1./frpc -c ./frpc.ini # -c 后面指定客户端端配置文件 如果如果出错了，会报错，一般都是报连接失败，可能你的服务端没开启，导致的。 同样可以改成后台启动 1nohub frpc -c frpc.ini &amp; 外网ssh连接内网服务器下面我们配一下ssh转发，这样我们就可以使用外网的ip加上固定的端口，ssh连接上我们内网的服务器了 123456789101112131415# frpc.ini[common]server_addr = x.x.x.xserver_port = 7000#[这个里面的内容可以随意命名][secret_ssh]type = stcp# 只有 sk 一致的用户才能访问到此服务 可以删除sk = abcdefg# 127.0.0.1 或者内网iplocal_ip = 127.0.0.1 local_port = 22# 外网ssh连接内网时用的端口 这里我用6000 意思就是 ssh阿里云服务22端口# 就是连接阿里云，6000就是ssh连接内网服务器remote_port = 6000 然后启动客户端 1./frpc -c ./frpc.ini # -c 后面指定客户端端配置文件 服务端开放6000端口，使用Xshell工具或者Linux/mac 输入命令行 ssh -p 6000 root@47.107.x.x进行ssh连接，连接成功 使用22端口链接阿里云服务器 使用6000端口连接公司内网的服务器 外网访问rabbitMQ等服务首先先去docker 拉个rabbitMQ镜像下拉，然后启动/或用其他方式安装个rabbitMQ，启动服务 然后去浏览器用内网ip访问一下rabbitMQ是否能正常访问 这时用外网IP访问一下，发现是失败的，现在我们就要配一下15672的端口转发, 将下面的配置复制到客户端的frpc.ini 文件 12345678[tcp1]type = tcp# 本地监听地址，内网地址均可，运行在路由器时有大用处。local_ip = 127.0.0.1# 本地监听端口local_port = 15672# 入口端口，这个端口会绑定本地的15672remote_port = 15672","categories":[],"tags":[{"name":"工具使用","slug":"工具使用","permalink":"http://tobiasll.github.io/tags/工具使用/"}]},{"title":"使用hexo搭建个人博客的细节","slug":"使用hexo搭建个人博客的细节","date":"2019-09-26T06:05:45.000Z","updated":"2019-09-29T02:06:13.888Z","comments":true,"path":"2019/09/26/使用hexo搭建个人博客的细节/","link":"","permalink":"http://tobiasll.github.io/2019/09/26/使用hexo搭建个人博客的细节/","excerpt":"","text":"一直都想写点技术文章，但由于鄙人不才，知识储备太少，所以工作一年都是看书和看视频等知识输入类型，并没有进行知识输出，现在决定搭建个人博客，不断学习的过程中写点东西，来当作自己的总结和分享 博客开源框架选择搭建博客有很多种方式，可以完全靠自己纯手工搭建，或采用开源的东西，前者本人觉得太折腾，所以不太适合我这种只想写点文章的个人用户，所以我选了开源静态博客框架加GitHub Page来托管等实现方案，开源框架目前比较火的有Hexo 、Jekyll、WordPress、ghost、Simple，Octopress… ## Hexo 和 Jekyll这是两种我比较了解的框架，两个都是比较主流的选择下面说一下选择原因吧！ Jekyll的底层是 Ruby，而Hexo 的底层是NodeJS，所以要求你有NodeJS环境或者Ruby，由于本人上班的电脑是Windos环境，安装Ruby感觉会比NodeJS麻烦，所以这一点我还是选了Hexo 虽然两者都是支持Markdown语法和有很多主题，但是我更喜欢Hexo的主题 之前的蚂蚁金服的sofa stack群里发现他们的sofa官网是Hexo写的，同时也期待他们开源这套主题模板，本人想用:joy: 废话不多说，下面开始安装搭建环境，hexo官网:https://hexo.io/ Github创建项目由于我们并没有后端服务器，所以我们把博客的东西都放到GitHub上，让GitHub做托管，这里由于我没有申请域名所以我还是用标准的GitHub Page ，由于GitHub有个特点就是它会用你的用户名.github.io/项目名/访问你仓库的index.html，例如：tobiasll.github.io/HappyBirthday所以我们要创建一个项目名叫 你的GitHub用户名.github.io来作为你的blog仓库，到时候如何没有买域名的小伙伴就可以直接用你的用户名.github.io不用加上项目名就可以直接访问你的博客了 新建项目首先到github创建一个项目，项目名为你的用户名.github.io 为什么图片要用红圈圈着SSH，因为后面我们可以用SSH keys 方式部署hexo提交代码，就不用每次都输入用户名和密码 安装Git既然是托管到github，那肯定要安装Git啊！Git官网:https://git-scm.com/，git的安装自行Google 安装完我们要设置ssh key ，首先进入或者在菜单里搜索 Git Bash，设置 user.name 和 user.email 配置信息： 12git config --global user.name &quot;你的GitHub用户名&quot;git config --global user.email &quot;你的GitHub注册邮箱&quot; 然后生成设置SSH密钥文件 1ssh-keygen -t rsa -C &quot;你的GitHub注册邮箱&quot; 输入命令后去C盘框生存目录的地址找到id_rsa.pub文件然后复制这个文件的密钥字符串到github 的新增ssh key中 然后到gitBash 测试一下输入 1ssh git@github.com 安装NodeJSHexo 基于 Node.js，Node.js 下载地址：Download | Node.js 下载安装包，注意安装 Node.js 会包含环境变量及 npm 的安装，安装后，检测 Node.js 是否安装成功，在命令行中输入 node -v 检测 npm 是否安装成功，在命令行中输入 npm -v : 安装Hexo先到你的想要存放的hexo数据的目录下创建一个空的文件夹，然后进去文件夹，在地址栏输入cmd进入命令行 然后输入安装hexo的命令 1npm install -g hexo-cli 安装完成输入,初始化我们的博客 1hexo init blog 这是初始化完成就会出现一个blog文件夹 然后在命令行测试hexo是否搭建成功，输入(注意如掉//后面的内容，) 123hexo n test_tobias # 注释 hexo new &quot;我的博客&quot; 新建文章hexo g # hexo generate 生成hexo s # hexo server 启动服务预览 然后在浏览器输入：http://localhost:4000，出现以下页面则说明搭建成功 推送本地hexo到github托管因为我们要做到的时让别人能通过外网访问我们的博客，上面的方式是在本机部署的方式，所以我们要把代码放到GitHub上，让github24小时托管，我们每次在本地写完文章或修改配置后部署到github上就好了 为了达到此目的，我们需要修改_config.yml配置文件，绑定我们的git地址，但是_config.yml是有两个一模一样的名子的，希望大家注意一下，别被坑到 第一个是在blog文件夹下的，是用来配置hexo站点的站点配置文件 第二个是在themes文件下的，是用来配置主题也就是页面样式的主题配置文件 那我们需要推送网站到github上，所以我们就需要配置站点的git地址，所以我们要修改blog目录下_config.yml的站点配置文件 打开config.yml文件添加 下面的配置：type、repo、brach前面一定要有两个空格，冒号：后面也要一个空格 1234deploy: type: git repo: 这里填入你之前在GitHub上创建仓库的ssh完整路径，记得加上.git branch: master 注意repo地址是ssh地址，不是https地址， 然后按保存，其实就是给 hexo d 这个命令做相应的配置，让 hexo 知道你要把 blog 部署在哪个位置，很显然，我们部署在我们 GitHub 的仓库里。最后安装 Git 部署插件，输入命令： 1npm install hexo-deployer-git --save 安装完就可以开始推送博客了 1234hexo clean # 清除缓存文件 (db.json) 和已生成的静态文件 (public)。在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行该命令。hexo g # hexo generate 生成静态文件。hexo d # hexo deploy 部署网站。 然后出现，这时你的GitHub项目也有一堆文件 然后就可以在你的浏览器输入 你的github用户名.github.io就可以访问博客了，ok，这时候如果成功出现页面则说明推送成功了，也可以正常使用，只是页面有很多参数都不是你想要的，而且很丑，所以这时候我们要去修改参数和主题，使这个博客变成真正属于你的网站 修改站点参数站点的config.yml可以修改一部分参数，例如 但是修改内容非常有限，所以这里不建议修改站点配置来达到目的，我们去修改themes下的另一个config.yml文件来达到修改样式的目的，那不喜欢这个主题的样式怎么办，这时候我们就可以换个主题，hexo是一个支持自定义主题模板的框架，同时官网也有很多开源的主题开源更换 更换主题 到官网选一个自己喜欢的主题，然后点图片进去预览，点红框的主题模板名字就可以进去模板的github了，里面都有很详细的配置和安装教程 然后就一步步按着安装就好了，然后遇到坑就自己去Google解决 archer主题启用 Algolia 搜索因为我用的模板是支持Algolia服务的，里面有个小坑，安装步骤 主题启用Algolia的链接https://github.com/fi3ework/hexo-theme-archer/wiki/%E5%90%AF%E7%94%A8-Algolia-%E6%90%9C%E7%B4%A2 其中这一段是有坑的，因为cmd打开的命令行执行hexo aligolia一直报错 加上当时上班中午没睡觉在搭博客，有点懵逼，不断在从新添加apikey和换不同的apiKey来尝试，但是都没生效，于是我就在不用set 变量了改用git bash的export了，结果一次就成功了，所以这个坑，如果大家遇到的话，注意一下 使用Hexo其实一般正常使用就记住那几个最简单的命令，也可以上官网看看命令， 1234567hexo new [layout] &lt;title&gt;新建一篇文章。如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。如果标题包含空格的话，请使用引号括起来。特别想开启about me功能时，执行 hexo new page &quot;about&quot;在 hexo 目录下 source/about/index.md 中添加字段 layout: about（这个字段必须有且不可更改为其他）不能用 hexo n &quot;文章名&quot;hexo n 新增的文章会保存在\\hexo\\blog\\source\\_posts文件夹下，直接去哪里打开md文件编写内容保存即可hexo new page &quot;文章名&quot; 出现在\\hexo\\blog\\文章名\\aboutindex.md 1234hexo generate生成静态文件。简写 hexo g编写完文章，运行hexo g就好生存新增静态文件，然后部署到GitHub即可 123hexo deploy部署网站。简写 hexo d 1234hexo clean清除缓存文件 (db.json) 和已生成的静态文件 (public)。在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行该命令。 other 看官网，或者等更新，常用的就这几个 小结其实搭建博客基本一步步按照说明搭建，坑会很少的，而且很快就搭建起来的，关于hexo的使用遇到小坑或好用的骚操作，由于自己也是第一次用这个东西，加上鄙人不才，所以就写了一点点，后续我再不断更新博客，希望大家搭建博客都非常顺利，第一次写博客，花了我两个小时，写的非常不好，希望大家见谅，文章有错误和需要修改的地方，或者有好的建议都可以在博客判断的微信二维码或者邮箱或者GitHub issue 给我发信息，谢谢大家！ 关于绑定域名这块请看下面《GitHub+Hexo 搭建个人网站详细教程》的文章，由于我并没有操作过，以及我没有需要补充的地方，所以我就没有写这一块的内容 参考资料《GitHub+Hexo 搭建个人网站详细教程》 《Hexo 官网》","categories":[],"tags":[{"name":"工具使用","slug":"工具使用","permalink":"http://tobiasll.github.io/tags/工具使用/"}]},{"title":"Hello World","slug":"hello-world","date":"2019-09-25T09:56:34.238Z","updated":"2019-09-25T09:56:34.239Z","comments":true,"path":"2019/09/25/hello-world/","link":"","permalink":"http://tobiasll.github.io/2019/09/25/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}